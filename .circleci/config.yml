version: 2.1
jobs:
 build:
   machine: true
   steps:
     - checkout
     - run: |
        PATH=~/bin:$PATH && curl https://storage.googleapis.com/git-repo-downloads/repo > ~/bin/repo 
        chmod a+x ~/bin/repo
        mkdir los
        cd los
        git config --global user.name galang8664
        git config --global user.email ardimasgalang5@gmail.com
        git config --global color.ui false
        repo init --depth=1 --no-repo-verify -u https://github.com/LineageOS/android.git -b lineage-20.0 -g default,-mips,-darwin,-notdefault
        git clone https://github.com/kitw4y/local_manifest.git --depth 1 -b lineage-20 .repo/local_manifests
        repo sync -c --no-clone-bundle --no-tags --optimized-fetch --prune --force-sync -j8
        source build/envsetup.sh
        lunch lineage_lancelot-userdebug
        export TZ=Asia/Jakarta #put before last build command
        make bacon 
        rsync -vhcP $file -e "ssh -o Compression=no" galang8664@frs.sourceforge.net:/home/frs/project/rom-buildbot/
        ardimas12345
     - run: cirrus run